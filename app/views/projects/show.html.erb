<div i class=""id="page-wrapper">
  <div class="row">
  <div class="col-lg-12">
    <h1><%= @project.name %> <small>Organisation</small></h1>
    <ol class="breadcrumb">
      <li><%= link_to '<i class="fa fa-dashboard"></i> Dashboard'.html_safe , root_path %></li>
      <li><%= link_to '<i class="fa fa-clipboard"></i> Meine Projekte'.html_safe , projects_path %></li>
      <li class="active"><i class="fa fa-clipboard"></i> <%= @project.name %></li>
    </ol>
  </div>
</div>
        <div class="inline">
        <%# Add List %>
        
        <%= form_for([@project, @project.lists.build], :html => {:class => 'form-inline'}) do |f| %>
        <div class="form-group">
          <%= f.text_field :name, :class => 'form-control', :placeholder => 'Listenname' %>
        </div>
        <%= f.submit "Neue Liste", :class => 'btn btn-default' %>
			
	      <% end %>
        
        <%# Add Task %>
        
       <%= form_for( [@project, @currentList.tasks.build], :html => {:class => 'form-inline'}) do |f| %>
        <div class="form-group">
          <%= f.text_field :titel, :class => 'form-control', :placeholder => 'Tasktitel' %>
          <%= f.text_field :text, :class => 'form-control', :placeholder => 'Tasktext' %>
        </div>
        <%= f.collection_select(:list_id, @lists, :id, :name, { :include_blank => false }, {:class=>'form-control'}) %>
        <%= f.submit "Neue Aufgabe", :class => 'btn btn-default' %>
			
	      <% end %>
      </div>
        <br/>
        <br/>
        
        <%# Show Lists and Tasks %>
        
      <div class="row">
        
        <% @lists.each_with_index do |list, n| %>
        <div class="col-xs-12 col-sm-6 col-md-4 col-lg-3">
        <div class="well well-lg">
          <h4><strong><%= list.name %></strong>
            <div class="dropdown pull-right">
              <button class="btn dropdown-toggle" type="button" data-toggle="dropdown"><span class="fa fa-bars"></span></button>
              <ul class="dropdown-menu" role="menu">
                <li role="presentation"><a role="menuitem" tabindex="-1" href="#">Neue Aufgabe</a></li>
                <li role="presentation"><a role="menuitem" tabindex="-1" href="#">Neuer Bereich</a></li>
                <li role="presentation" class="divider"></li>
                <li role="presentation"><%= link_to 'Liste löschen', project_list_path(project_id:@project, list_id:list), method: :delete, :confirm => "Soll die Liste wirklich gelöscht werden?", :class => 'btn btn-danger' %></li>
              </ul>
            </div>
          </h4>
          <br/>
          <% list.tasks.each do |task| %>
          <div class="panel panel-default">
            <div class="panel-heading">
          
             <a data-toggle="modal" data-target="#editTaskModal"><strong><%= task.titel %></strong></a><%= link_to '&times;'.html_safe, project_path(@project), :class => 'close pull-right' %>
            
          
           
            </div>
            <div class="panel-body">
              <%= task.text %>
              <br/>
              <br/>
              <%= link_to '<i class="fa fa-arrow-circle-left"></i>'.html_safe, project_task_move_to_prev_list_path(project_id:@project.id, task_id:task.id) if task.list != @lists.first %>
			  <%= link_to '<i class="fa fa-arrow-circle-right"></i>'.html_safe, project_task_move_to_next_list_path(project_id:@project.id, task_id:task.id) if task.list != @lists.last %>
            </div>
          </div>
          <% end %>
        </div>
      </div>
        
        <% if (n+1)%2 == 0 %>
        <div class="clearfix visible-sm"></div>
        <% end %>
        
       <% if (n+1)%3 == 0 %>
        <div class="clearfix visible-md"></div>
        <% end %>
        
        <% if (n+1)%4 == 0 %>
        <div class="clearfix visible-lg"></div>
        <% end %>
        
        <% end %>
		  </div>
      
  <%= link_to 'Projekt löschen', project_path(@project), method: :delete, :confirm => "Soll das Projekt wirklich gelöscht werden?", :class => 'btn btn-danger' %>
  <br/>
  <br/ >
  <%= link_to 'Zurück', projects_path, :class => 'btn btn-default' %>
</div>


<!-- Task-Modal -->
          <div class="modal fade" id="editTaskModal" tabindex="-1" role="dialog" aria-labelledby="editTaskModalLabel" aria-hidden="true">
            <div class="modal-dialog">
              <div class="modal-content">
                <div class="modal-header">
                  <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                  <h4 class="modal-title" id="editTaskModalLabel">[Task title]</h4>
                </div>
                <div class="modal-body">
                  [Task content]
                  <%= params.inspect %>
             
                <div class="modal-footer">
                  <button type="button" class="btn btn-primary">Speichern</button>                  
                  <button type="button" class="btn btn-default" data-dismiss="modal">Abbrechen</button>
                </div>
              </div><!--     <%= link_to '&times;'.html_safe, project_path(@project), :class => 'close pull-right' %>/.modal-content -->
            </div><!-- /.modal-dialog -->
          </div><!-- /.modal -->

